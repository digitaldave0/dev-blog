---
layout: default
title: DaveBot
---

<h2>ü§ñ DaveBot</h2>
<div id="chat-box" style="border:1px solid #ccc; padding:10px; height:300px; overflow-y:auto; background:#f9f9f9;"></div>
<div class="input-container" style="margin-top: 10px; display: flex; gap: 10px;">
  <input id="user-input" type="text" placeholder="Ask DaveBot something..." style="flex-grow: 1; padding: 8px;">
  <button onclick="sendMessage()" style="padding: 8px 16px; background: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer;">Send</button>
</div>

<style>
  #chat-box {
    font-family: system-ui, -apple-system, sans-serif;
    line-height: 1.5;
  }
  #chat-box div {
    margin: 8px 0;
    padding: 8px 12px;
    border-radius: 8px;
    max-width: 85%;
  }
  .user-message {
    margin-left: auto !important;
    background: #e3f2fd;
    color: #000;
  }
  .bot-message {
    margin-right: auto !important;
    background: #f5f5f5;
    color: #000;
  }
  .thinking {
    font-style: italic;
    opacity: 0.7;
  }
  #user-input {
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  #user-input:focus {
    outline: none;
    border-color: #0066cc;
    box-shadow: 0 0 0 2px rgba(0,102,204,0.2);
  }
</style>

<script>
  const chatBox = document.getElementById('chat-box');

  function appendMessage(sender, text, isThinking = false) {
    const msg = document.createElement('div');
    const icon = sender === 'You' ? '‚ùì' : 'üòä';
    msg.className = sender === 'You' ? 'user-message' : 'bot-message';
    if (isThinking) msg.className += ' thinking';
    msg.innerHTML = `${icon} <strong>${sender === 'You' ? 'You' : 'DaveBot'}:</strong> ${text}`;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  async function sendMessage() {
    const input = document.getElementById('user-input');
    const userText = input.value.trim();
    if (!userText) return;

    appendMessage('You', userText);
    input.value = '';
    appendMessage('Bot', 'Thinking...', true);

    const response = await fetch('/.netlify/functions/chatbot', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt: userText })
    });
    const data = await response.json();
    chatBox.lastChild.remove(); // remove "Thinking..."
    appendMessage('Bot', data.reply);
  }

  // Allow sending message with Enter key
  document.getElementById('user-input').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      sendMessage();
    }
  });
</script>
